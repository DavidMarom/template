(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(18),s=n.n(r),o=n(6),u=n(7),i=n(8),j=n(2),l=n.n(j),b=n(4),O=n(32),d="/api/",h=n.n(O).a.create({withCredentials:!0}),f=function(e,t){return"undefined"===e&&(e=""),v(e,"GET",t)},p=function(e,t){return v(e,"PUT",t)},x=function(e,t){return v(e,"DELETE",t)};function v(e){return m.apply(this,arguments)}function m(){return(m=Object(b.a)(l.a.mark((function e(t){var n,c,a,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"get",c=r.length>2&&void 0!==r[2]?r[2]:null,e.prev=2,e.next=5,h({url:"".concat(d).concat(t),method:n,data:c});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(c)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function k(e){return function(t){t({type:"PAGE_NAME",name:e})}}var N={getBooks:function(e,t){return f("book/".concat(e,"?page=").concat(t))},getById:function(e){return f("book/".concat(e))},remove:function(e){return x("book/".concat(e))},update:function(e){return p("book/update",e)},findIdxToMark:function(e,t){return e.findIndex((function(e){return e.name===t.name}))},count:function(){return f("book/count")}};function _(e){return function(){var t=Object(b.a)(l.a.mark((function t(n){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.update(e);case 2:c=t.sent,n({type:"UPDATE_BOOK",_book:c});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function g(e,t){return function(){var n=Object(b.a)(l.a.mark((function n(c){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:"LOADING_START"}),n.next=4,N.getBooks(e,t);case 4:a=n.sent,c({type:"SET_BOOKS",books:a}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("BookActions: err in loadBook",n.t0);case 11:return n.prev=11,c({type:"LOADING_DONE"}),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(e){return n.apply(this,arguments)}}()}var S={getAuthors:function(){return f("author/")},update:function(e){return p("author/update",e)},count:function(){return f("author/count")}};function T(e){return function(){var t=Object(b.a)(l.a.mark((function t(n){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.update(e);case 2:c=t.sent,n({type:"UPDATE_AUTHOR",_author:c});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function E(){return function(){var e=Object(b.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getAuthors();case 3:n=e.sent,t({type:"SET_AUTHORS",authors:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("AuthorsActions: err in loadAuthors",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}var w=n(0);function A(e){var t=e.book,n=e.doRefresh,a=Object(o.c)(),r=Object(o.d)((function(e){return e.author.authors})),s=Object(c.useState)(t.name),u=Object(i.a)(s,2),j=u[0],O=u[1],d=Object(c.useState)(t.author),h=Object(i.a)(d,2),f=h[0],p=h[1],x=Object(c.useState)(!1),v=Object(i.a)(x,2),m=v[0],k=v[1];if(!t)return Object(w.jsx)("h1",{children:"loading"});var N=function(){k(!m)},g=function(){var e=Object(b.a)(l.a.mark((function e(c){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.preventDefault(),r={name:j,author:f,_id:t._id},a(_(r)),N(),n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=Object(w.jsxs)("form",{onSubmit:g,className:"table",children:[Object(w.jsx)("input",{className:"tc",name:"name",type:"text",onChange:function(e){O(e.target.value)},placeholder:t.name}),Object(w.jsx)("select",{className:"tc",name:"author",id:"authors",onChange:function(e){p(e.target.value)},children:r.map((function(e){return Object(w.jsx)("option",{value:e.last_name,children:e.last_name},e._id)}))}),Object(w.jsx)("p",{className:"tc-small",children:t._id}),Object(w.jsx)("p",{className:"tc"}),Object(w.jsx)("p",{className:"tc"}),Object(w.jsx)("button",{className:"btn",children:Object(w.jsx)("i",{className:"fas fa-check"})}),Object(w.jsx)("button",{className:"btn",onClick:N,children:Object(w.jsx)("i",{className:"fas fa-times"})})]});return m?Object(w.jsx)("div",{children:S}):Object(w.jsxs)("div",{className:"table",children:[Object(w.jsx)("p",{className:"tc",children:t.name}),Object(w.jsx)("p",{className:"tc",children:t.author}),Object(w.jsx)("p",{className:"tc-small",children:t._id}),Object(w.jsx)("p",{className:"tc"}),Object(w.jsx)("p",{className:"tc"}),Object(w.jsx)("button",{className:"btn",onClick:N,children:Object(w.jsx)("i",{className:"fas fa-pen"})}),Object(w.jsx)("p",{})]})}var y=function(){var e=Object(o.c)(),t=Object(c.useState)(0),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.d)((function(e){return e.book.bookCount})),u=Object(o.d)((function(e){return e.book.books})),j=Object(c.useState)(1),O=Object(i.a)(j,2),d=O[0],h=O[1],f=Object(c.useState)(""),p=Object(i.a)(f,2),x=(p[0],p[1],Math.ceil(s/4)),v=function(){r(a+1),e(g("",d))};return Object(c.useEffect)((function(){e(g("",d)),e(E())}),[d,a]),Object(c.useEffect)((function(){e(k("books")),e(function(){var e=Object(b.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.count();case 2:n=e.sent,t({type:"COUNT_BOOKS",number:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),u?Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Books"}),Object(w.jsxs)("div",{className:"page-details",children:[Object(w.jsxs)("p",{children:["Total books on DB: ",s]}),Object(w.jsxs)("p",{children:["Total pages : ",x]})]}),Object(w.jsxs)("div",{className:"table-head",children:[Object(w.jsx)("p",{className:"tc",children:"Book Name"}),Object(w.jsx)("p",{className:"tc",children:"Author"}),Object(w.jsx)("p",{className:"tc",children:"ID"}),Object(w.jsx)("p",{className:"tc"}),Object(w.jsx)("p",{className:"tc"}),Object(w.jsx)("p",{}),Object(w.jsx)("p",{})]}),u.map((function(e){return Object(w.jsx)(A,{book:e,doRefresh:v},e._id)})),Object(w.jsx)("button",{onClick:function(){d>1&&h(d-1)},children:"Prev"}),Object(w.jsx)("button",{onClick:function(){d<=x-1&&h(d+1)},children:"Next"})]}):Object(w.jsx)("h1",{children:"Loading"})};function C(e){var t=e.author,n=e.doRefresh,a=Object(o.c)(),r=Object(c.useState)(t.first_name),s=Object(i.a)(r,2),u=s[0],j=s[1],O=Object(c.useState)(t.last_name),d=Object(i.a)(O,2),h=d[0],f=d[1],p=Object(c.useState)(!1),x=Object(i.a)(p,2),v=x[0],m=x[1];if(!t)return Object(w.jsx)("h1",{children:"loading"});var k=function(){m(!v)},N=function(){var e=Object(b.a)(l.a.mark((function e(c){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.preventDefault(),r={first_name:u,last_name:h,_id:t._id},a(T(r)),k(),n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=Object(w.jsxs)("form",{onSubmit:N,children:[Object(w.jsx)("input",{name:"name",type:"text",onChange:function(e){j(e.target.value)},placeholder:t.first_name}),Object(w.jsx)("br",{}),Object(w.jsx)("input",{name:"name",type:"text",onChange:function(e){f(e.target.value)},placeholder:t.last_name}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{children:"Save"})]});return v?Object(w.jsxs)("div",{className:"table",children:[_,Object(w.jsx)("button",{onClick:k,children:"Cancel"})]}):Object(w.jsxs)("div",{className:"table",children:[Object(w.jsx)("p",{className:"tc",children:t.first_name}),Object(w.jsx)("p",{className:"tc",children:t.last_name}),Object(w.jsx)("button",{onClick:k,children:"Edit"})]})}var U=function(){var e=Object(o.c)(),t=Object(c.useState)(0),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.d)((function(e){return e.author.authorCount})),u=Object(o.d)((function(e){return e.author.authors})),j=Object(c.useState)(1),O=Object(i.a)(j,2),d=O[0],h=O[1],f=Math.ceil(s/4),p=function(){r(a+1),e(E())};return Object(c.useEffect)((function(){e(E())}),[d,a]),Object(c.useEffect)((function(){e(k("authors")),e(function(){var e=Object(b.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.count();case 2:n=e.sent,t({type:"COUNT_AUTHORS",number:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),u?Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Authors"}),Object(w.jsxs)("div",{className:"page-details",children:[Object(w.jsxs)("p",{children:["Total authors on DB: ",s]}),Object(w.jsxs)("p",{children:["Total pages : ",f]})]}),Object(w.jsxs)("div",{className:"table-head",children:[Object(w.jsx)("p",{className:"tc",children:"First Name"}),Object(w.jsx)("p",{className:"tc",children:"Last Name"}),Object(w.jsx)("p",{className:"tc"})]}),u.map((function(e){return Object(w.jsx)(C,{author:e,doRefresh:p},e._id)})),Object(w.jsx)("button",{onClick:function(){d>1&&h(d-1)},children:"Prev"}),Object(w.jsx)("button",{onClick:function(){d<=f-1&&h(d+1)},children:"Next"})]}):Object(w.jsx)("h1",{children:"Loading"})};var B={getTasks:function(){return f("task/")}};function R(){return function(){var e=Object(b.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.getTasks();case 3:n=e.sent,t({type:"GET_TASKS",tasks:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err in loadTask",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function D(e){var t=e.task,n=(Object(o.c)(),Object(o.d)((function(e){return e.author.authors})),Object(c.useState)(!1)),a=Object(i.a)(n,2),r=a[0],s=a[1];if(!t)return Object(w.jsx)("h1",{children:"loading"});return r?Object(w.jsxs)("div",{className:"table",children:[Object(w.jsx)("p",{children:"edit"}),Object(w.jsx)("button",{onClick:function(){s(!r)},children:"Cancel"})]}):Object(w.jsxs)("div",{className:"table",children:[Object(w.jsx)("p",{className:"tc",children:t.title}),Object(w.jsx)("p",{className:"tc",children:t.status})]})}var I=function(){var e=Object(o.c)(),t=Object(c.useState)(0),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(o.d)((function(e){return e.task.tasks})),u=function(){r(a+1),e(R())};return Object(c.useEffect)((function(){e(R())}),[a]),Object(c.useEffect)((function(){e(R()),e(k("tasks")),console.log(s)}),[]),s?Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Tasks"}),Object(w.jsx)("div",{className:"page-details"}),Object(w.jsxs)("div",{className:"table-head",children:[Object(w.jsx)("p",{className:"tc",children:"Task"}),Object(w.jsx)("p",{className:"tc",children:"Status"}),Object(w.jsx)("p",{className:"tc"})]}),s.map((function(e){return Object(w.jsx)(D,{task:e,doRefresh:u},e._id)}))]}):Object(w.jsx)("h1",{children:"Loading"})},P=n(15),L=function(){var e=Object(o.d)((function(e){return e.user.pageName}));return Object(w.jsxs)("div",{className:"cbl2 inner-side-bar",children:[Object(w.jsx)("p",{className:"title",children:"Side Bar"}),Object(w.jsx)("div",{className:"books"===e?"active-cell":"inactive-cell",children:Object(w.jsx)(P.a,{to:"/",children:" Books"})}),Object(w.jsx)("div",{className:"authors"===e?"active-cell":"inactive-cell",children:Object(w.jsx)(P.a,{to:"/authors",children:" Authors"})}),Object(w.jsx)("div",{className:"tasks"===e?"active-cell":"inactive-cell",children:Object(w.jsx)(P.a,{to:"/tasks",children:" Tasks"})})]})};var G=Object(o.b)(null,null)(Object(u.f)((function(){return Object(w.jsx)("div",{className:"outter-container",children:Object(w.jsx)("div",{className:"inner-container",children:Object(w.jsxs)("div",{className:"ra",children:[Object(w.jsx)("div",{className:"side-bar",children:Object(w.jsx)(L,{})}),Object(w.jsx)("div",{className:"content-container",children:Object(w.jsxs)(u.c,{children:[Object(w.jsx)(u.a,{exact:!0,component:y,path:"/"}),Object(w.jsx)(u.a,{exact:!0,component:U,path:"/authors"}),Object(w.jsx)(u.a,{exact:!0,component:I,path:"/tasks"})]})})]})})})}))),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},H=n(10),M=Object(H.a)(),F=n(17),J=n(33),V=n(3),X=null;sessionStorage.user&&(X=JSON.parse(sessionStorage.user));var W={users:[],loggedInUser:X,userCount:null,pageName:null,popup:!0};var q={books:[],bookCount:null,activeBook:null};var z={authors:[],authorCount:null,activeAuthor:null};var Q={tasks:[]};var Y={isLoading:!1};var Z=Object(F.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"COUNT_USERS":return Object(V.a)(Object(V.a)({},e),{},{userCount:t.number[0].total});case"SHOW_POPUP":return Object(V.a)(Object(V.a)({},e),{},{popup:t.show});case"SET_USER":return Object(V.a)(Object(V.a)({},e),{},{loggedInUser:t.user,popup:!0});case"GET_USER":return Object(V.a)(Object(V.a)({},e),{},{singleUser:t.userId});case"SET_USERS":return Object(V.a)(Object(V.a)({},e),{},{users:t.users});case"REMOVE_USER":return Object(V.a)(Object(V.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"PAGE_NAME":return Object(V.a)(Object(V.a)({},e),{},{pageName:t.name});case"UPDATE_USER":return Object(V.a)(Object(V.a)({},e),{},{users:e.users.map((function(e){return t._user._id===e._id?t._user:e}))});default:return e}},book:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"COUNT_BOOKS":return Object(V.a)(Object(V.a)({},e),{},{bookCount:t.number[0].total});case"SET_BOOK":return Object(V.a)(Object(V.a)({},e),{},{activeBook:t.book});case"GET_BOOK":return Object(V.a)(Object(V.a)({},e),{},{singleUser:t.bookId});case"SET_BOOKS":return Object(V.a)(Object(V.a)({},e),{},{books:t.books});case"REMOVE_BOOK":return Object(V.a)(Object(V.a)({},e),{},{books:e.books.filter((function(e){return e._id!==t.bookId}))});case"UPDATE_BOOK":return Object(V.a)(Object(V.a)({},e),{},{book:e.books.map((function(e){return t._book._id===e._id?t._book:e}))});default:return e}},author:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"COUNT_AUTHORS":return Object(V.a)(Object(V.a)({},e),{},{authorCount:t.number[0].total});case"SET_AUTHOR":return Object(V.a)(Object(V.a)({},e),{},{activeAuthor:t.author});case"SET_AUTHORS":return Object(V.a)(Object(V.a)({},e),{},{authors:t.authors});case"UPDATE_AUTHOR":return Object(V.a)(Object(V.a)({},e),{},{author:e.authors.map((function(e){return t._author._id===e._id?t._author:e}))});default:return e}},task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"GET_TASKS":return Object(V.a)(Object(V.a)({},e),{},{tasks:t.tasks});default:return e}},system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(V.a)(Object(V.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(V.a)(Object(V.a)({},e),{},{isLoading:!1});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.c,ee=Object(F.d)(Z,$(Object(F.a)(J.a)));n(63);s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(u.b,{history:M,children:Object(w.jsx)(o.a,{store:ee,children:Object(w.jsx)(G,{})})})}),document.getElementById("root")),K()}},[[64,1,2]]]);
//# sourceMappingURL=main.599a6cb4.chunk.js.map